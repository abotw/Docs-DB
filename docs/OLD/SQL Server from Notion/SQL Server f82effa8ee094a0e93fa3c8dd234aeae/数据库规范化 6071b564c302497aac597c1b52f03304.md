# 数据库规范化

# 作业 1

某公司计划对产品的入库和销售情况进行计算机管理。需要管理的产品信息有产品编号、产品名称、单价、库存数量等。客户信息包括客户编号、客户姓名、住址、联系电话等。对产品的入库管理包括入库日期、产品编号、产品名称、入库数量、单价等。对销售管理包括销售日期、产品编号、产品名称、客户编号、客户姓名、单价、销售数量等。

1. 简述有哪些实体？实体都有哪些属性？
2. 绘制出产品销售的 E-R 图。
3. 将产品销售的 E-R 图转换成关系数据模式。
4. 将产品销售关系数据规范为三范式。
5. 分析候选键、主键、外键与公共键。
6. 举例说明如何保证产品销售数据的完整性。

1. 实体有 2 个，分别是产品和客户，属性如下：
    1. 产品，属性：产品编号、产品名称、单价、库存数量
    2. 客户，属性：客户编号、客户姓名、住址、联系电话
2. ER 图如下：

![Untitled](%E8%AF%BE%E6%9C%AC%20P92%20%E5%AE%9E%E8%AE%AD%E4%BD%9C%E4%B8%9A%205ad0fe794d4242e69287096456642432/Untitled.jpeg)

1. 关系数据模式：
    1. 产品表
        
        
        | 产品编号 | 产品名称 | 单价 | 库存数量 |
        | --- | --- | --- | --- |
        | 主键 | 候选键 |  |  |
    2. 客户表
        
        
        | 客户编号 | 客户姓名 | 住址 | 联系电话 |
        | --- | --- | --- | --- |
        | 主键 | 候选键 |  |  |
    3. 入库表
        
        
        | 入库编号 | 入库日期 | 入库数量 | 产品编号 | 产品名称 | 单价 |
        | --- | --- | --- | --- | --- | --- |
        | 主键 |  |  | 外键、公共键 |  |  |
    4. 销售表
        
        
        | 销售编号 | 销售日期 | 产品编号 | 产品名称 | 客户编号 | 客户姓名 | 单价 | 销售数量 |
        | --- | --- | --- | --- | --- | --- | --- | --- |
        | 主键 |  | 外键、公共键 |  | 外键、公共键 |  |  |  |
2. 规范为三范式后的结果：
    1. 产品表
        
        
        | 产品编号 | 产品名称 | 单价 | 库存数量 |
        | --- | --- | --- | --- |
        | 主键 | 候选键 |  |  |
    2. 客户表
        
        
        | 客户编号 | 客户姓名 | 住址 | 联系电话 |
        | --- | --- | --- | --- |
        | 主键 | 候选键 |  |  |
    3. 入库表
        
        
        | 入库编号 | 入库日期 | 入库数量 | 产品编号 |
        | --- | --- | --- | --- |
        | 主键 |  |  | 外键、公共键 |
    4. 销售表
        
        
        | 销售编号 | 销售日期 | 销售数量 | 产品编号 | 客户编号 |
        | --- | --- | --- | --- | --- |
        | 主键 |  |  | 外键、公共键 | 外键、公共键 |
3.  候选键、主键、外键与公共键已经在 3. 中进行了标识。
4. 以产品表为例进行说明：
    
    
    |  | 保证数据完整性 |
    | --- | --- |
    | 保证列数据完整性 | 产品编号：字符型，长度10，不允许空
    产品名称：字符型，长度20，不允许空
    单价：带小数位的数值型（整数位1位、小数位3位），不允许空，值大于等于0
    库存数量：整型数值型，不允许空，值大于等于0 |
    | 保证表数据完整性 | 产品编号为主键，并且值不允许空 |
    | 保证数据参照完整性 | 表中无外键 |

# 作业 2

经修改，并规范为三范式后：

- **Department**
    
    
    | DepartmentNo | DepartmentName | DepartmentLocation | Manager |
    | --- | --- | --- | --- |
    | PK | CK |  | FK |
- **Employee**
    
    
    | EmployeeId | EmployeeName | EmployeeSex | EmployeeAddress | EmployeeSalary | EmployeeBirthDate | DepartmentNo | DependentId |
    | --- | --- | --- | --- | --- | --- | --- | --- |
    | PK |  |  |  |  |  | FK | FK |
- **Project**
    
    
    | ProjectNo | ProjectName | DepartmentNo |
    | --- | --- | --- |
    | PK | CK | FK |
- **Dependent**
    
    
    | DependentId | DependentName | DependentSex | DependentBirthDate | DependentRelationship | EmployeeId |
    | --- | --- | --- | --- | --- | --- |
    | PK | CK |  |  |  | FK |
- **WorkOn**
    
    
    | EmployeeId | ProjectNo | Hours |
    | --- | --- | --- |
    | PK | PK |  |