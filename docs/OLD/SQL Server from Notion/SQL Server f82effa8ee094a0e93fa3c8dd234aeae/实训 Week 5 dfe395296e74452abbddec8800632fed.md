# 实训 | Week 5

# HW-01

## 1-1

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled.png)

```sql
-- HW-1-1
-- 学号为“00000025”的学生第一志愿报名选修“001”课程，
-- 请在数据库中处理
INSERT StuCou
VALUES ('00000025','001','1','报名','Null')
UPDATE Course
SET WillNum = WillNum + 1
```

## 1-2

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%201.png)

```sql
-- HW-1-2
-- 删除学号“00000025”学生的选修报名情况
UPDATE Course
SET WillNum = WillNum - 1
FROM Course
WHERE Course.CouNo = 
(SELECT CouNo FROM StuCou WHERE StuNo = '00000025')
DELETE StuCou
FROM StuCou
WHERE StuCou.StuNo = '00000025'
```

## 1-3

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%202.png)

```sql
-- HW-1-3
-- 将“00多媒体”班的“杜晓静”名字修改为“杜小静”
UPDATE Student
SET StuName = '杜小静'
FROM Student, Class
WHERE
Student.ClassNo = Class.ClassNo 
and Class.ClassName = '00多媒体'
and Student.StuName = '杜晓静'
```

## 1-4

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%203.png)

```sql
-- HW-1-4
-- “00电子商务”班的“林斌”申请将已选修的
-- “网络信息检索原理与技术课程”修改为“Linux操作系统”
UPDATE StuCou
SET CouNo = 
(SELECT CouNo 
FROM Course 
WHERE CouName = 'Linux操作系统')
FROM Course, Student, Class, StuCou
WHERE Class.ClassNo = Student.ClassNo and
Student.StuNo = StuCou.StuNo and
StuCou.CouNo = Course.CouNo and
Class.ClassName = '00电子商务' and
Student.StuName = '林斌' and
Course.CouName = '网络信息检索原理与技术'
```

# HW-02

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%204.png)

## 2-1

![HW-2-1.png](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/HW-2-1.png)

Msg 547, Level 16, State 0, Line 1
The INSERT statement conflicted with the FOREIGN KEY constraint "FK__Score__Sno__173876EA". The conflict occurred in database "Sa", table "dbo.Student", column 'Sno'.
The statement has been terminated.

## 2-2

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%205.png)

```sql
-- HW-2-2
-- 将学生“李军”的“计算机导论”课程成绩修改为 100
UPDATE Score
SET Degree = '100'
FROM Score, Course, Student
WHERE
Score.Sno = Student.Sno and
Course.Cno = Score.Cno and
Student.Sname = '李军' and
Course.Cname = '计算机导论'
```

## 2-3

![Untitled](%E5%AE%9E%E8%AE%AD%20Week%205%20dfe395296e74452abbddec8800632fed/Untitled%206.png)

```sql
-- HW-2-3
-- 查询课程成绩超过 85 分的每门课的最高分
SELECT Cno as '课程编号', MAX(Degree) as '课程成绩'
FROM Score
WHERE Score.Degree > 85
GROUP BY Cno
```